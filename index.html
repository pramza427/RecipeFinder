<style>
  body {
    height: 100%;
  }
</style>
<!DOCTYPE html>
<html>
  <head>
    <title>Recipe Finder</title>
    <link rel="icon" href="Images/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />
    <link
      href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <!-- Material io package-->
    <link
      href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css"
      rel="stylesheet"
    />
    <!-- Heart Button CSS -->
    <script
      src="https://kit.fontawesome.com/3929e16ef5.js"
      crossorigin="anonymous"
    ></script>
    <!-- <script src="{% static 'network/functions.js' %}"></script> -->

    <!-- Our CSS -->
    <link rel="stylesheet" href="mainLayout.css" />

    <!-- Our Scripts -->
  </head>
  <body>
    <!-- Navbar Start -->

    <nav class="navbar navbar-dark justify-content-between">
      <div class="container-fluid">
        <button type="button" id="sidebarCollapse" class="btn btn-info">
          <i class="fas fa-align-left"></i>
          <span>Filters</span>
        </button>
        <a class="navbar-brand" href="#" style="color: white">Recipe Finder</a>
        <a class="nav-link" id="savedRecipes" href="#Saved" style="color: white"
          >Saved Recipes</a
        >
        <form class="form-inline center">
          <input
            class="form-control mr-sm-2"
            type="search"
            placeholder="Pesto pasta"
            aria-label="Search"
            id="searchQuery"
          />
          <button
            class="btn btn-info my-2 my-sm-0"
            type="submit"
            onclick="searchRecipeWithQuery(document.getElementById('searchQuery').value)"
          >
            Search
          </button>
        </form>
      </div>
    </nav>
    <!-- End Navbar -->

    <!-- MainPage Start -->
    <div id="MainPage" class="wrapper">
      <!-- LeftBar Start -->
      <div class="LeftBar scrollable" id="filters">
        <!-- Search Recipes Button -->
        <button id="searchRecipes" class="btn btn-info">
          Search using filters
        </button>
        <!-- ######## CALORIE SLIDER ######## -->
        <div>
          <h4 style="color: #36aec9">Calories</h4>
          <output id="calorieValue">2000</output><br />
          <input
            type="range"
            min="0"
            max="3500"
            step="50"
            value="2000"
            class="slider"
            id="Calories"
            style="width: 90%"
          />
        </div>

        <!-- ######## INGREDIENTS TAB START ######## -->
        <div>
          <h4>
            <a href="#" id="ingredientsTab" class="filter-head">Ingredients</a>
          </h4>
        </div>
        <!-- ######## INGREDIENTS TAB END ######## -->

        <!-- ######## DIET TAB START ######## -->
        <h4>
          <a
            data-toggle="collapse"
            href="#dietsDiv"
            aria-expanded="true"
            class="filter-head"
            >Diet</a
          >
        </h4>
        <div class="collapse tablediv show" id="dietsDiv">
          <button
            id="filter"
            type="button"
            class="btn btn-light"
            data-toggle="button"
            aria-pressed="false"
            autocomplete="off"
          >
            Gluten Free
          </button>
        </div>
        <!-- ######## DIET TAB END ######## -->

        <!-- ######## CUISINE TAB START ######## -->
        <h4>
          <a
            data-toggle="collapse"
            href="#cuisineDiv"
            aria-expanded="false"
            class="filter-head"
            >Cuisine</a
          >
        </h4>
        <div class="collapse" id="cuisineDiv"></div>
        <!-- ######## CUISINE TAB END ######## -->

        <!-- ######## TIME TO MAKE TAB START ######## -->
        <h4>
          <a
            data-toggle="collapse"
            href="#timeDiv"
            aria-expanded="false"
            class="filter-head"
            >Time To Make</a
          >
        </h4>
        <div class="collapse" id="timeDiv">
          <button
            id="15"
            type="button"
            class="btn btn-light time timeFilter"
            data-toggle="button"
            aria-pressed="false"
            autocomplete="off"
          >
            Less than 15 minutes
          </button>
          <button
            id="30"
            type="button"
            class="btn btn-light time timeFilter"
            data-toggle="button"
            aria-pressed="false"
            autocomplete="off"
          >
            Less than 30 minutes
          </button>
          <button
            id="45"
            type="button"
            class="btn btn-light time timeFilter"
            data-toggle="button"
            aria-pressed="false"
            autocomplete="off"
          >
            Less than 45 minutes
          </button>
          <button
            id="60"
            type="button"
            class="btn btn-light time timeFilter"
            data-toggle="button"
            aria-pressed="false"
            autocomplete="off"
          >
            Less than 60 minutes
          </button>
        </div>
        <!-- ######## TTM TAB START ######## -->

        <!-- ######## TIME OF DAY TAB START ######## -->
        <h4>
          <a
            data-toggle="collapse"
            href="#mealDiv"
            aria-expanded="false"
            class="filter-head"
            >Meal Type</a
          >
        </h4>
        <div class="collapse" id="mealDiv"></div>
        <!-- ######## TIME OF DAY TAB START ######## -->
      </div>
      <!-- LeftBat End -->

      <!-- MainPage Content Start -->
      <div class="scrollable" id="content">
        <div id="loading"></div>
        <div id="noRecipes" class="errorMessage" style="display: none">
          No recipes found, please try again
        </div>
        <div id="noSaved" class="errorMessage" style="display: none">
          You have no saved Recipes. Go save some!
        </div>

        <!-- MainRecipies Start -->
        <div id="recipeResultsDiv"></div>
        <div
          class="card col-xs-12 col-sm-12 col-md-5 col-lg-5 ml-5"
          id="templateCard"
        >
          <img src="./Images/BreadPizza.jpg" class="card-img-top" />
          <div class="card-body">
            <h5 class="card-title">
              Oven-Baked French Bread Pizzas
              <span class="h_container" style="float: right">
                <i id="heart" class="far fa-heart"></i>
              </span>
            </h5>

            <p class="card-text">
              Pizza night is the best night — especially when everyone gets to
              build their dream slice. (Or three!)
            </p>
            <span style="float: left"
              ><strong id="card-servings">Servings: 2</strong></span
            ><span style="float: right"
              ><strong id="card-time">Cooking time: 30 mins</strong></span
            >
            <div class="mt-5">
              <a
                href="#recipeID"
                class="btn btn-primary btn-sm viewRecipe"
                style="float: right"
                >Full recipe ></a
              >
            </div>
          </div>
        </div>
        <div class="row mt-3" id="templateRow"></div>

        <!-- MainRecipies End -->

        <!-- SavedRecipies Start -->
        <div id="savedRecipesDiv" style="display: none">
          <!-- <div class="row mt-3"> -->
          <div
            class="card col-xs-12 col-sm-12 col-md-5 col-lg-5 ml-5"
            id="templateCardSaved"
          >
            <img src="./Images/BreadPizza.jpg" class="card-img-top" />
            <div class="card-body">
              <h5 class="card-title">
                Oven-Baked French Bread Pizzas
                <span class="h_container" style="float: right">
                  <i id="heart" class="fas fa-heart"></i>
                </span>
              </h5>

              <p class="card-text">
                Pizza night is the best night — especially when everyone gets to
                build their dream slice. (Or three!)
              </p>
              <span style="float: left"
                ><strong id="card-servings">Servings: 2</strong></span
              ><span style="float: right"
                ><strong id="card-time">Cooking time: 30 mins</strong></span
              >
              <div class="mt-5">
                <a
                  href="#recipeID"
                  class="btn btn-primary btn-sm viewRecipe"
                  style="float: right"
                  >Full recipe ></a
                >
              </div>
            </div>
          </div>
          <div class="row mt-3" id="templateRowSaved"></div>
        </div>
        <!-- SavedRecipies End -->

        <!-- Recipe Details Card -->
        <div id="recipeDetailsCard" style="display: none; margin: 5%">
          <button
            type="button"
            class="btn btn-secondary mb-3 ml-3"
            id="previousRecipes"
          >
            ← Go Back
          </button>
          <div class="row mx-auto" id="recipeCard">
            <div class="col-md-6">
              <div class="row">
                <div class="col-md-12">
                  <h2 id="recipe-title">Oven-Baked French Bread Pizzas</h2>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <img
                    alt="Bootstrap Image Preview"
                    src="./Images/BreadPizza.jpg"
                    style="width: 100%"
                    id="recipe-img"
                  />
                </div>
              </div>
            </div>
            <div class="col-md-1"></div>
            <div class="col-md-5">
              <div class="row" style="height: 130px"></div>
              <div class="row" style="display: block">
                <!-- <h4 style="display: block">Preparation time: 3 minutes</h4> -->
                <h4 style="display: block" id="recipe-time">
                  Cook time: 15 minutes
                </h4>
                <h4 style="display: block" id="recipe-servings">
                  Servings: 2 persons
                </h4>
                <h4 style="display: block" id="recipe-calories">
                  Calories per serving: 1500
                </h4>
                <button
                  type="button"
                  class="btn btn-primary btn-md btn-block"
                  style="width: 50%; text-align: center"
                  id="instructionsButton"
                  onclick="goToRecipeInstructions()"
                >
                  Instructions
                </button>
              </div>
            </div>
          </div>
          <div class="row" style="margin-top: 5%; margin-left: 1%">
            <div class="col-md-9" id="ingredientsRow">
              <div class="row">
                <h3 style="text-align: center">Ingredients</h3>
              </div>
              <div class="form-check form-check-inline" id="templateIngredient">
                <input class="form-check-input" type="checkbox" />
                <label class="form-check-label">Sauce</label>
              </div>
            </div>
            <div class="col-md-3">
              <button
                type="button"
                class="btn btn-primary"
                style="display: block; margin-bottom: 5%; width: 100%"
              >
                Add all ingredients
              </button>
              <button
                type="button"
                class="btn btn-primary"
                style="display: block; margin-bottom: 5%; width: 100%"
              >
                Print shopping list
              </button>
            </div>
          </div>
          <div
            class="row"
            style="margin-top: 5%; margin-left: 1%"
            id="InstructionsRow"
          >
            <div class="col-md-12">
              <div class="row"><h3>Instructions</h3></div>
              <div class="row" id="instructionsDetail"></div>
            </div>
          </div>
        </div>
      </div>
      <!-- MainPage Content End -->
    </div>
    <!-- MainPage End -->

    <!-- IngredientsPage Start -->
    <div id="ingredientsDiv" class="wrapper">
      <!-- Tab links -->
      <div class="tab">
        <button class="tablinks" onclick="openTab(event, 'Dairy')">
          Dairy
        </button>
        <button class="tablinks" onclick="openTab(event, 'Meats')">
          Meats
        </button>
        <button class="tablinks" onclick="openTab(event, 'Fruits')">
          Fruits
        </button>
        <button class="tablinks" onclick="openTab(event, 'Vegetables')">
          Vegetables
        </button>
        <button class="tablinks" onclick="openTab(event, 'Spices')">
          Spices
        </button>
        <button class="tablinks" onclick="openTab(event, 'Liquids')">
          Liquids
        </button>
      </div>

      <!-- Tab content -->
      <div id="Dairy" class="tabcontent scrollable">
        <button type="button" class="btn btn-secondary" id="toRecipes">
          ← Go Back</button
        ><br />
        <button
          class="ibutton"
          id="All Dairy"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          All Dairy
        </button>
        <button
          class="ibutton"
          id="Butter"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Butter
        </button>
        <button
          class="ibutton"
          id="Cheese"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Cheese
        </button>
        <button
          class="ibutton"
          id="Cottage Cheese"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Cottage Cheese
        </button>
        <button
          class="ibutton"
          id="Cream"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Cream
        </button>
        <button
          class="ibutton"
          id="Eggs"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Eggs
        </button>
        <button
          class="ibutton"
          id="Ice Cream"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Ice Cream
        </button>
        <button
          class="ibutton"
          id="Sour Cream"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Sour Cream
        </button>
        <button
          class="ibutton"
          id="Whipped Cream"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Whipped Cream
        </button>
        <button
          class="ibutton"
          id="Yogurt"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Yogurt
        </button>
      </div>

      <div id="Meats" class="tabcontent scrollable">
        <button type="button" class="btn btn-secondary" id="toRecipes">
          ← Go Back</button
        ><br />
        <button
          class="ibutton"
          id="All Meat"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          All Meat
        </button>
        <button
          class="ibutton"
          id="Bacon"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Bacon
        </button>
        <button
          class="ibutton"
          id="Beef"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Beef
        </button>
        <button
          class="ibutton"
          id="Clams"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Clams
        </button>
        <button
          class="ibutton"
          id="Crab"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Crab
        </button>
        <button
          class="ibutton"
          id="Fish"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Fish
        </button>
        <button
          class="ibutton"
          id="Ham"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Ham
        </button>
        <button
          class="ibutton"
          id="Lobster"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Lobster
        </button>
        <button
          class="ibutton"
          id="Shrimp"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Shrimp
        </button>
        <button
          class="ibutton"
          id="Turkey"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Turkey
        </button>
      </div>

      <div id="Fruits" class="tabcontent scrollable">
        <button type="button" class="btn btn-secondary" id="toRecipes">
          ← Go Back</button
        ><br />
        <button
          class="ibutton"
          id="All Fruits"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          All Fruits
        </button>
        <button
          class="ibutton"
          id="Apple"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Apple
        </button>
        <button
          class="ibutton"
          id="Blueberries"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Blueberries
        </button>
        <button
          class="ibutton"
          id="Cherry"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Cherry
        </button>
        <button
          class="ibutton"
          id="Coconut"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Coconut
        </button>
        <button
          class="ibutton"
          id="Grapefruit"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Grapefruit
        </button>
        <button
          class="ibutton"
          id="Green Grapes"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Green Grapes
        </button>
        <button
          class="ibutton"
          id="Kiwi"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Kiwi
        </button>
        <button
          class="ibutton"
          id="Lemon"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Lemon
        </button>
        <button
          class="ibutton"
          id="Mango"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Mango
        </button>
        <button
          class="ibutton"
          id="Orange"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Orange
        </button>
        <button
          class="ibutton"
          id="Pineapple"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Pineapple
        </button>
      </div>

      <div id="Vegetables" class="tabcontent scrollable">
        <button type="button" class="btn btn-secondary" id="toRecipes">
          ← Go Back</button
        ><br />
        <button
          class="ibutton"
          id="All Vegetables"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          All Vegetables
        </button>
        <button
          class="ibutton"
          id="Artichokes"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Artichokes
        </button>
        <button
          class="ibutton"
          id="Asparagus"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Asparagus
        </button>
        <button
          class="ibutton"
          id="Beets"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Beets
        </button>
        <button
          class="ibutton"
          id="Broccoli"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Broccoli
        </button>
        <button
          class="ibutton"
          id="Cabbage"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Cabbage
        </button>
        <button
          class="ibutton"
          id="Carrots"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Carrots
        </button>
        <button
          class="ibutton"
          id="Cauliflower"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Cauliflower
        </button>
        <button
          class="ibutton"
          id="Celery"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Celery
        </button>
        <button
          class="ibutton"
          id="Eggplant"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Eggplant
        </button>
        <button
          class="ibutton"
          id="Kale"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Kale
        </button>
        <button
          class="ibutton"
          id="Lettuce"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Lettuce
        </button>
        <button
          class="ibutton"
          id="Onion"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Onion
        </button>
        <button
          class="ibutton"
          id="Peppers"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Peppers
        </button>
        <button
          class="ibutton"
          id="Pineapple"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Potatoes
        </button>
        <button
          class="ibutton"
          id="Pumpkin"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Pumpkin
        </button>
        <button
          class="ibutton"
          id="Radish"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Radish
        </button>
        <button
          class="ibutton"
          id="Tomatoes"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Tomatoes
        </button>
      </div>

      <div id="Spices" class="tabcontent scrollable">
        <button type="button" class="btn btn-secondary" id="toRecipes">
          ← Go Back</button
        ><br />
        <button
          class="ibutton"
          id="All Spices"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          All Spices
        </button>
        <button
          class="ibutton"
          id="Allspice"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Allspice
        </button>
        <button
          class="ibutton"
          id="Basil"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Basil
        </button>
        <button
          class="ibutton"
          id="Black Pepper"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Black Pepper
        </button>
        <button
          class="ibutton"
          id="Cinnamon Stick"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Cinnamon Stick
        </button>
        <button
          class="ibutton"
          id="Cumin"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Cumin
        </button>
        <button
          class="ibutton"
          id="Ginger"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Ginger
        </button>
        <button
          class="ibutton"
          id="Mint"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Mint
        </button>
        <button
          class="ibutton"
          id="Mustard"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Mustard
        </button>
        <button
          class="ibutton"
          id="Nutmeg"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Nutmeg
        </button>
        <button
          class="ibutton"
          id="Paprika"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Paprika
        </button>
        <button
          class="ibutton"
          id="Rosemary"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Rosemary
        </button>
        <button
          class="ibutton"
          id="Saffron"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Saffron
        </button>
        <button
          class="ibutton"
          id="Sage"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Sage
        </button>
        <button
          class="ibutton"
          id="Star Anise"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Star Anise
        </button>
        <button
          class="ibutton"
          id="Thyme"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Thyme
        </button>
        <button
          class="ibutton"
          id="Vanilla Bean"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Vanilla Bean
        </button>
      </div>

      <div id="Liquids" class="tabcontent scrollable">
        <button type="button" class="btn btn-secondary" id="toRecipes">
          ← Go Back</button
        ><br />
        <button
          class="ibutton"
          id="All Liquids"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          All Liquids
        </button>
        <button
          class="ibutton"
          id="Ale"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Ale
        </button>
        <button
          class="ibutton"
          id="Beer"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Beer
        </button>
        <button
          class="ibutton"
          id="Chicken Broth"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Chicken Broth
        </button>
        <button
          class="ibutton"
          id="Juice"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Juice
        </button>
        <button
          class="ibutton"
          id="Rum"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Rum
        </button>
        <button
          class="ibutton"
          id="Vinegar"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Vinegar
        </button>
        <button
          class="ibutton"
          id="Wine"
          value="NA"
          onclick="javascript:toggle(this);"
        >
          Wine
        </button>
      </div>
    </div>
    <!-- IngredientsPage End -->

    <!-- Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
      integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
      integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
      crossorigin="anonymous"
    ></script>
  </body>
</html>

<script>
  var apiKey = "a63c2bf3a91e4933935c665b0251b1ad";

  if (localStorage.hasOwnProperty("isRefresh")) {
    localStorage.removeItem("isRefresh");
    loadSavedRecipes();
  }
  if (!localStorage.hasOwnProperty("savedRecipes")) {
    localStorage.setItem("savedRecipes", JSON.stringify([]));
  } else {
    let savedRecipes = JSON.parse(localStorage.getItem("savedRecipes"));
  }
  // -------------- LEFT BAR ANIMATION ---------------- //
  document.querySelector("#sidebarCollapse").addEventListener("click", (x) => {
    $("#filters").toggleClass("active");
  });
  // -------------- CREATE DIETS BUTTONS ---------------- //
  var dietsArray = [
    "Gluten Free",
    "Ketogenic",
    "Vegetarian",
    "Lacto-Vegetarian",
    "Ovo-Vegetarian",
    "Vegan",
    "Pescaetarian",
    "Paleo",
    "Primal",
    "Whole30",
  ];

  let dietsTable = document.createElement("table");
  var row;
  for (var i = 0; i < dietsArray.length; i += 1) {
    if (i % 2 === 0) {
      if (i != 0) dietsTable.appendChild(row);
      row = document.createElement("tr");
    }
    var td = document.createElement("td");
    var button = document.querySelector(".tablediv button").cloneNode(true);
    button.innerHTML = dietsArray[i];
    button.classList.add("dietFilter");
    td.appendChild(button);
    row.appendChild(td);
  }
  if (row.childElementCount) {
    dietsTable.appendChild(row);
  }
  document.querySelector("#dietsDiv").appendChild(dietsTable);

  // -------------- CREATE CUISINE BUTTONS ---------------- //
  var cuisineArray = [
    "African",
    "American",
    "British",
    "Cajun",
    "Caribbean",
    "Chinese",
    "Eastern European",
    "European",
    "French",
    "German",
    "Greek",
    "Indian",
    "Irish",
    "Italian",
    "Japanese",
    "Jewish",
    "Korean",
    "Latin American",
    "Mediterranean",
    "Mexican",
    "Middle Eastern",
    "Nordic",
    "Southern",
    "Spanish",
    "Thai",
    "Vietnamese",
  ];

  let cuisineTable = document.createElement("table");
  var row;
  for (var i = 0; i < cuisineArray.length; i += 1) {
    if (i % 2 === 0) {
      if (i != 0) cuisineTable.appendChild(row);
      row = document.createElement("tr");
    }
    var td = document.createElement("td");
    var button = document.querySelector(".tablediv button").cloneNode(true);
    button.innerHTML = cuisineArray[i];
    button.classList.add("cuisineFilter");
    td.appendChild(button);
    row.appendChild(td);
  }
  if (row.childElementCount) {
    cuisineTable.appendChild(row);
  }
  document.querySelector("#cuisineDiv").appendChild(cuisineTable);

  // -------------- CREATE MEAL BUTTONS ---------------- //
  var mealArray = [
    "Main course",
    "Side dish",
    "Dessert",
    "Appetizer",
    "Salad",
    "Bread",
    "Breakfast",
    "Soup",
    "Beverage",
    "Sauce",
    "Marinade",
    "Fingerfood",
    "Snack",
    "Drink",
  ];

  let mealTable = document.createElement("table");
  var row;
  for (var i = 0; i < mealArray.length; i += 1) {
    if (i % 2 === 0) {
      if (i != 0) mealTable.appendChild(row);
      row = document.createElement("tr");
    }
    var td = document.createElement("td");
    var button = document.querySelector(".tablediv button").cloneNode(true);
    button.innerHTML = mealArray[i];
    button.classList.add("mealFilter");
    td.appendChild(button);
    row.appendChild(td);
  }
  if (row.childElementCount) {
    mealTable.appendChild(row);
  }
  document.querySelector("#mealDiv").appendChild(mealTable);

  // remove button that was used to copy
  document.querySelector(".tablediv button").remove();
  // update Calorie value when slider is moved
  $(document).on("input", "#Calories", (evt) => {
    document.querySelector("#calorieValue").value = evt.target.value;
  });

  // -------------- Search by Filter BUTTON LISTENER ---------------- //
  document.querySelector("#searchRecipes").addEventListener("click", (evt) => {
    document.querySelector("#noSaved").style.display = "none";
    document.querySelector("#noRecipes").style.display = "none";
    var calories = document.querySelector("#calorieValue").value;

    // get arrays for each filter, populate with active buttons
    var dietInputs = [];
    document.querySelectorAll(".dietFilter.active").forEach((button) => {
      dietInputs.push(button.innerHTML.toLowerCase());
    });
    var cuisineInputs = [];
    document.querySelectorAll(".cuisineFilter.active").forEach((button) => {
      cuisineInputs.push(button.innerHTML.toLowerCase());
    });
    var timeInputs = [];
    document.querySelectorAll(".timeFilter.active").forEach((button) => {
      timeInputs.push(button.id);
    });
    var mealInputs = [];
    document.querySelectorAll(".mealFilter.active").forEach((button) => {
      mealInputs.push(button.innerHTML.toLowerCase());
    });
    var excludeIngredients = [];
    document.querySelectorAll(".ibutton").forEach((button) => {
      if (button.value === "EX") {
        excludeIngredients.push(button.id.toLowerCase());
      }
    });

    var urlBase = "https://api.spoonacular.com/recipes/complexSearch?";
    urlBase += "maxCalories=" + calories;
    var dietUrl = "";
    if (dietInputs.length > 0) {
      dietUrl += "&diet=" + String(dietInputs);
    }
    var cuisineUrl = "";
    if (cuisineInputs.length > 0) {
      cuisineUrl += "&cuisine=" + String(cuisineInputs);
    }
    var timeUrl = "";
    if (timeInputs.length > 0) {
      timeUrl += "&maxReadyTime=";
      timeUrl += timeInputs[0];
    }
    var mealUrl = "";
    if (mealInputs.length > 0) {
      mealUrl += "&type=" + String(mealInputs);
    }
    var excludeUrl = "";
    if (excludeIngredients.length > 0) {
      excludeUrl += "&excludeIngredients=" + String(excludeIngredients);
    }

    var fullUrl =
      urlBase +
      dietUrl +
      cuisineUrl +
      timeUrl +
      mealUrl +
      excludeUrl +
      "&addRecipeInformation=true&number=10&apiKey=" +
      apiKey;
    populateMainCards(fullUrl);
  });
  // -------------- INGREDIENTS BUTTON LISTENER ---------------- //
  document.getElementsByClassName("tablinks")[0].click();

  function toggle(button) {
    switch (button.value) {
      case "NA":
        button.style.background = "green";
        button.value = "IN";
        break;
      case "IN":
        button.style.background = "red";
        button.value = "EX";
        break;
      case "EX":
        button.style.background = "grey";
        button.value = "NA";
        break;
    }
  }

  function openTab(evt, ingredientName) {
    var i, tabcontent, tablinks;

    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }

    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    document.getElementById(ingredientName).style.display = "block";
    evt.currentTarget.className += " active";
  }

  function hideLoader() {
    $("#loading").hide();
  }

  function showLoader() {
    $("#loading").show();
  }

  // -------------- HIDE INGREDIENTS TAB ---------------- //
  document.querySelector("#ingredientsDiv").style.display = "none";

  // code to go back and forth between ingredients and main page
  document.querySelector("#ingredientsTab").addEventListener("click", (evt) => {
    document.querySelector("#MainPage").style.display = "none";
    document.querySelector("#ingredientsDiv").style.display = "flex";
    $("#savedRecipes").css({ "background-color": "" });
  });

  document.querySelector(".navbar-brand").addEventListener("click", (evt) => {
    document.querySelector("#noSaved").style.display = "none";
    document.querySelector("#MainPage").style.display = "flex";
    document.querySelector("#ingredientsDiv").style.display = "none";
    document.querySelector("#recipeResultsDiv").style.display = "block";
    document.querySelector("#savedRecipesDiv").style.display = "none";
    document.querySelector("#recipeDetailsCard").style.display = "none";
    $("#savedRecipes").css({ "background-color": "" });
  });

  document.querySelector("#savedRecipes").addEventListener("click", (evt) => {
    loadSavedRecipes();
  });

  document
    .querySelector("#previousRecipes")
    .addEventListener("click", (evt) => {
      $("#savedRecipes").css({ "background-color": "" });
      document.querySelector("#MainPage").style.display = "flex";
      document.querySelector("#ingredientsDiv").style.display = "none";
      document.querySelector("#recipeResultsDiv").style.display = "block";
      document.querySelector("#savedRecipesDiv").style.display = "none";
      document.querySelector("#recipeDetailsCard").style.display = "none";
    });

  function goToRecipeInstructions() {
    location.href = "index.html#InstructionsRow";
  }

  function loadSavedRecipes() {
    document.querySelector("#noRecipes").style.display = "none";
    $("#savedRecipes").css("background-color", "#302078");
    document.querySelector("#MainPage").style.display = "flex";
    document.querySelector("#ingredientsDiv").style.display = "none";
    document.querySelector("#recipeResultsDiv").style.display = "none";
    document.querySelector("#savedRecipesDiv").style.display = "block";
    document.querySelector("#recipeDetailsCard").style.display = "none";

    $(".populatedCardsSaved").remove();
    let savedRecipes = JSON.parse(localStorage.getItem("savedRecipes"));
    if (savedRecipes.length > 0) {
      showLoader();
      fetch(
        "https://api.spoonacular.com/recipes/informationBulk?ids=" +
          String(savedRecipes) +
          "&includeNutrition=false&" +
          "apiKey=" +
          apiKey
      )
        .then((x) => {
          return x.json();
        })
        .then((json) => {
          hideLoader();
          var existingRowSaved = document.querySelector("#templateRowSaved");
          let i = 0;
          let ogRowSaved = document.querySelector("#templateRowSaved");
          let ogCardSaved = document.querySelector("#templateCardSaved");
          for (i = 0; i < json.length; i += 2) {
            let newRowSaved = ogRowSaved.cloneNode(true);
            newRowSaved.id = "row" + i;
            newRowSaved.classList.add("populatedCardsSaved");
            let heart1 =
              "<span class='h_container' style='float: right'> <i id='" +
              json[i].id +
              "'class='fas fa-heart myheart'></i></span>";
            let cardCopy1 = ogCardSaved.cloneNode(true);
            cardCopy1.id = json[i].id.toString();
            cardCopy1.querySelector(".card-title").innerHTML =
              json[i].title + heart1;
            cardCopy1.querySelector(".card-img-top").src = json[i].image;
            cardCopy1.querySelector(".card-text").innerHTML = json[i].summary;
            cardCopy1.querySelector("#card-servings").innerHTML =
              "Servings: " + json[i].servings;
            cardCopy1.querySelector("#card-time").innerHTML =
              "Ready In " + json[i].readyInMinutes + " Minutes";

            cardCopy1.querySelector(".viewRecipe").href =
              "#" + json[i].id.toString();
            cardCopy1.querySelector(".viewRecipe").id = json[i].id.toString();
            newRowSaved.appendChild(cardCopy1);

            if (!(i + 1 > json.length - 1)) {
              let heart2 =
                "<span class='h_container' style='float: right'> <i id='" +
                json[i + 1].id +
                "'class='fas fa-heart myheart'></i></span>";
              let cardCopy2 = ogCardSaved.cloneNode(true);
              cardCopy2.id = json[i].id.toString();
              cardCopy2.querySelector(".card-title").innerHTML =
                json[i + 1].title + heart2;
              cardCopy2.querySelector(".card-img-top").src = json[i + 1].image;
              cardCopy2.querySelector(".card-text").innerHTML =
                json[i + 1].summary;
              cardCopy2.querySelector("#card-servings").innerHTML =
                "Servings: " + json[i + 1].servings;
              cardCopy2.querySelector("#card-time").innerHTML =
                "Ready In " + json[i + 1].readyInMinutes + " Minutes";
              cardCopy2.querySelector(".viewRecipe").href =
                "#" + json[i + 1].id.toString();
              cardCopy2.querySelector(".viewRecipe").id = json[
                i + 1
              ].id.toString();

              newRowSaved.appendChild(cardCopy2);
            }

            document.querySelector("#savedRecipesDiv").appendChild(newRowSaved);
          }
          // -------------- MAKE HEARTS CLICKABLE ---------------- //
          var hearts = document.querySelectorAll(".myheart");
          hearts.forEach((heart) => {
            heart.addEventListener("click", (evt) => {
              if (heart.classList.contains("far")) {
                heart.classList.remove("far");
                heart.classList.add("fas");
                var ids = [];
                let element = document.getElementById(evt.target.id);
                let savedRecipes = JSON.parse(
                  localStorage.getItem("savedRecipes")
                );
                savedRecipes.push(evt.target.id);
                localStorage.setItem(
                  "savedRecipes",
                  JSON.stringify(savedRecipes)
                );
              } else {
                heart.classList.remove("fas");
                heart.classList.add("far");
                let savedRecipes = JSON.parse(
                  localStorage.getItem("savedRecipes")
                );
                const index = savedRecipes.indexOf(evt.target.id);
                if (index > -1) {
                  savedRecipes.splice(index, 1);
                }
                localStorage.setItem(
                  "savedRecipes",
                  JSON.stringify(savedRecipes)
                );
                localStorage.setItem("isRefresh", "true");
                location.reload();
              }
            });
          }); // end make hearts clickable

          var viewRecipeButtons = document.querySelectorAll(".viewRecipe");
          viewRecipeButtons.forEach((button) => {
            button.addEventListener("click", (evt) => {
              recipeID = evt.target.id;
              recipeURL =
                "https://api.spoonacular.com/recipes/" +
                recipeID +
                "/information?includeNutrition=true&apiKey=" +
                apiKey;
              fetch(recipeURL)
                .then((x) => {
                  return x.json();
                })
                .then((json) => {
                  console.log(json);
                  document.querySelector("#MainPage").style.display = "flex";
                  document.querySelector("#ingredientsDiv").style.display =
                    "none";
                  document.querySelector("#recipeResultsDiv").style.display =
                    "none";
                  document.querySelector("#savedRecipesDiv").style.display =
                    "none";
                  document.querySelector("#recipeDetailsCard").style.display =
                    "block";
                  let instructionsDetailDiv = document.getElementById(
                    "instructionsDetail"
                  );
                  let recipeTitle = document.getElementById("recipe-title");
                  $(".populateIngredients").remove();
                  let existingIngredient = document.querySelector(
                    "#templateIngredient"
                  );
                  let ingredientsRow = document.querySelector(
                    "#ingredientsRow"
                  );
                  for (j = 0; j < json.extendedIngredients.length; j++) {
                    let ingredientBox = existingIngredient.cloneNode(true);
                    ingredientBox.id = json.extendedIngredients[
                      j
                    ].name.toString();
                    ingredientBox.classList.add("populateIngredients");
                    ingredientBox.querySelector("label").innerHTML =
                      json.extendedIngredients[j].name;
                    ingredientsRow.appendChild(ingredientBox);
                  }
                  if (json.instructions.includes("<ol>")) {
                    instructionsDetailDiv.innerHTML = json.instructions;
                  } else {
                    let instructionLines = json.instructions.split("\n");
                    instructionsDetailDiv.innerHTML = "<ol>";
                    for (i = 0; i < instructionLines.length; i++) {
                      if (
                        instructionLines[i] == "" ||
                        instructionLines[i] == " " ||
                        instructionLines[i].toLowerCase() === "instructions"
                      ) {
                        continue;
                      }
                      instructionsDetailDiv.innerHTML +=
                        "<li>" + instructionLines[i] + "</li>";
                      if (i == instructionLines.length - 1) {
                        instructionsDetailDiv.innerHTML += "</ol>";
                      }
                    }
                  }
                  recipeTitle.innerHTML = json.title;

                  $("#recipe-servings").html("Servings: " + json.servings);
                  $("#recipe-time").html(
                    "Cook time: " + json.readyInMinutes + " minutes"
                  );
                  $("#recipe-calories").html(
                    "Calories: " + json.nutrition.nutrients[0].amount
                  );
                  $("#recipe-img").attr("src", json.image);
                });
            });
          });
        });
    } else {
      document.querySelector("#noSaved").style.display = "flex";
    }
  }
  // -------------- Ingredients Back Button ---------------- //
  var backButtons = document.querySelectorAll("#toRecipes");
  backButtons.forEach((button) => {
    button.addEventListener("click", showMain);
  });

  function showMain() {
    document.querySelector("#MainPage").style.display = "flex";
    document.querySelector("#ingredientsDiv").style.display = "none";
    document.querySelector("#recipeResultsDiv").style.display = "block";
    document.querySelector("#savedRecipesDiv").style.display = "none";
    document.querySelector("#recipeDetailsCard").style.display = "none";
  }

  function searchRecipeWithQuery(query) {
    document.querySelector("#noRecipes").style.display = "none";
    document.querySelector("#MainPage").style.display = "flex";
    document.querySelector("#ingredientsDiv").style.display = "none";
    document.querySelector("#recipeResultsDiv").style.display = "block";
    document.querySelector("#savedRecipesDiv").style.display = "none";
    document.querySelector("#recipeDetailsCard").style.display = "none";
    $("#savedRecipes").css({ "background-color": "" });
    $(".populatedCards").remove();

    var queryUrl =
      "https://api.spoonacular.com/recipes/complexSearch?query=" +
      query +
      "&addRecipeInformation=true&apiKey=" +
      apiKey;
    var existingRow = document.querySelector("#templateRow");
    populateMainCards(queryUrl);
  }

  // -------------- Populate Main Recipe Cards ---------------- //
  tempurl =
    "https://api.spoonacular.com/recipes/complexSearch?query=&addRecipeNutrition=true&number=10&apiKey=" +
    apiKey;
  populateMainCards(tempurl);

  function populateMainCards(url) {
    document.querySelector("#noRecipes").style.display = "none";
    document.querySelector("#noSaved").style.display = "none";
    document.querySelector("#recipeResultsDiv").innerHTML = "";
    var existingRow = document.querySelector("#templateRow");
    showLoader();
    fetch(url)
      .then((x) => {
        return x.json();
      })
      .then((json) => {
        hideLoader();
        let i = 0;
        results = json.results;
        if (results === undefined || results.length === 0) {
          document.querySelector("#noRecipes").style.display = "flex";
          return;
        }

        let ogRow = document.querySelector("#templateRow");
        let ogCard = document.querySelector("#templateCard");
        for (i = 0; i < results.length; i += 2) {
          let newRow = ogRow.cloneNode(true);
          newRow.id = "row" + i;
          newRow.classList.add("populatedCards");
          let heart1 =
            "<span class='h_container' style='float: right'> <i id='" +
            results[i].id +
            "'class='far fa-heart myheart'></i></span>";
          let cardCopy1 = ogCard.cloneNode(true);
          cardCopy1.id = "card" + i;
          cardCopy1.querySelector(".card-title").innerHTML =
            results[i].title + heart1;
          cardCopy1.querySelector(".card-img-top").src = results[i].image;
          cardCopy1.querySelector(".card-text").innerHTML = results[i].summary;
          cardCopy1.querySelector("#card-servings").innerHTML =
            "Servings: " + results[i].servings;
          cardCopy1.querySelector("#card-time").innerHTML =
            "Ready In " + results[i].readyInMinutes + " Minutes";

          cardCopy1.querySelector(".viewRecipe").href =
            "#" + results[i].id.toString();
          cardCopy1.querySelector(".viewRecipe").id = results[i].id.toString();

          newRow.appendChild(cardCopy1);

          if (i + 1 < results.length) {
            let heart2 =
              "<span class='h_container' style='float: right'> <i id='" +
              results[i + 1].id +
              "'class='far fa-heart myheart'></i></span>";
            let cardCopy2 = ogCard.cloneNode(true);
            cardCopy2.id = "card" + String(Number(i + 1));
            cardCopy2.querySelector(".card-title").innerHTML =
              results[i + 1].title + heart2;
            cardCopy2.querySelector(".card-img-top").src = results[i + 1].image;
            cardCopy2.querySelector(".card-text").innerHTML =
              results[i + 1].summary;
            cardCopy2.querySelector("#card-servings").innerHTML =
              "Servings: " + results[i + 1].servings;
            cardCopy2.querySelector("#card-time").innerHTML =
              "Ready In " + results[i + 1].readyInMinutes + " Minutes";
            cardCopy2.querySelector(".viewRecipe").href =
              "#" + results[i + 1].id.toString();
            cardCopy2.querySelector(".viewRecipe").id = results[
              i + 1
            ].id.toString();
            newRow.appendChild(cardCopy2);
          }

          document.querySelector("#recipeResultsDiv").appendChild(newRow);
        } // end for loop

        // -------------- MAKE HEARTS CLICKABLE ---------------- //
        var hearts = document.querySelectorAll(".myheart");
        hearts.forEach((heart) => {
          heart.addEventListener("click", (evt) => {
            if (heart.classList.contains("far")) {
              heart.classList.remove("far");
              heart.classList.add("fas");
              var ids = [];
              let element = document.getElementById(evt.target.id);
              let savedRecipes = JSON.parse(
                localStorage.getItem("savedRecipes")
              );
              savedRecipes.push(evt.target.id);
              localStorage.setItem(
                "savedRecipes",
                JSON.stringify(savedRecipes)
              );
            } else {
              heart.classList.remove("fas");
              heart.classList.add("far");
              let savedRecipes = JSON.parse(
                localStorage.getItem("savedRecipes")
              );
              const index = savedRecipes.indexOf(evt.target.id);
              if (index > -1) {
                savedRecipes.splice(index, 1);
              }
              localStorage.setItem(
                "savedRecipes",
                JSON.stringify(savedRecipes)
              );
            }
          });
        }); // end make hearts clickable

        var viewRecipeButtons = document.querySelectorAll(".viewRecipe");
        viewRecipeButtons.forEach((button) => {
          button.addEventListener("click", (evt) => {
            recipeID = evt.target.id;
            recipeURL =
              "https://api.spoonacular.com/recipes/" +
              recipeID +
              "/information?includeNutrition=true&apiKey=" +
              apiKey;
            fetch(recipeURL)
              .then((x) => {
                return x.json();
              })
              .then((json) => {
                document.querySelector("#MainPage").style.display = "flex";
                document.querySelector("#ingredientsDiv").style.display =
                  "none";
                document.querySelector("#recipeResultsDiv").style.display =
                  "none";
                document.querySelector("#savedRecipesDiv").style.display =
                  "none";
                document.querySelector("#recipeDetailsCard").style.display =
                  "block";
                let instructionsDetailDiv = document.getElementById(
                  "instructionsDetail"
                );
                hideLoader();
                let recipeTitle = document.getElementById("recipe-title");
                $(".populateIngredients").remove();
                let existingIngredient = document.querySelector(
                  "#templateIngredient"
                );
                let ingredientsRow = document.querySelector("#ingredientsRow");
                for (j = 0; j < json.extendedIngredients.length; j++) {
                  let ingredientBox = existingIngredient.cloneNode(true);
                  ingredientBox.id = json.extendedIngredients[
                    j
                  ].name.toString();
                  ingredientBox.classList.add("populateIngredients");
                  ingredientBox.querySelector("label").innerHTML =
                    json.extendedIngredients[j].name;
                  ingredientsRow.appendChild(ingredientBox);
                }
                if (json.instructions.includes("<ol>")) {
                  instructionsDetailDiv.innerHTML = json.instructions;
                } else {
                  let instructionLines = json.instructions.split("\n");
                  instructionsDetailDiv.innerHTML = "<ol>";
                  for (i = 0; i < instructionLines.length; i++) {
                    if (
                      instructionLines[i] == "" ||
                      instructionLines[i] == " " ||
                      instructionLines[i].toLowerCase() === "instructions"
                    ) {
                      continue;
                    }
                    instructionsDetailDiv.innerHTML +=
                      "<li>" + instructionLines[i] + "</li>";
                    if (i == instructionLines.length - 1) {
                      instructionsDetailDiv.innerHTML += "</ol>";
                    }
                  }
                }
                recipeTitle.innerHTML = json.title;
                $("#recipe-servings").html("Servings: " + json.servings);
                $("#recipe-time").html(
                  "Cook time: " + json.readyInMinutes + " minutes"
                );
                $("#recipe-calories").html(
                  "Calories: " + json.nutrition.nutrients[0].amount
                );
                $("#recipe-img").attr("src", json.image);
              });
          });
        });
      });
  }
</script>
